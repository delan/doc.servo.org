<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A helper library to make SIMD more friendly."><title>fearless_simd - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="fearless_simd" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0 (f8297e351 2025-10-28)" data-channel="1.91.0" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../static.files/storage-e2aeef58.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Crate fearless_simd</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../fearless_simd/index.html">fearless_<wbr>simd</a><span class="version">0.3.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#inlining" title="Inlining">Inlining</a></li><li><a href="#webassembly" title="Webassembly">Webassembly</a><ul><li><a href="#credits" title="Credits">Credits</a></li></ul></li><li><a href="#feature-flags" title="Feature Flags">Feature Flags</a></li></ul><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#traits" title="Traits">Traits</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>fearless_<wbr>simd</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/fearless_simd/lib.rs.html#4-388">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A helper library to make SIMD more friendly.</p>
<p>Fearless SIMD exposes safe SIMD with ergonomic multi-versioning in Rust.</p>
<p>Fearless SIMD uses â€œmarker valuesâ€ which serve as proofs of which target features are available on the current CPU.
These each implement the <a href="trait.Simd.html" title="trait fearless_simd::Simd"><code>Simd</code></a> trait, which exposes a core set of SIMD operations which are implemented as
efficiently as possible on each target platform.</p>
<p>Additionally, there are types for packed vectors of a specific width and element type (such as <a href="struct.f32x4.html" title="struct fearless_simd::f32x4"><code>f32x4</code></a>).
Fearless SIMD does not currently support vectors of less than 128 bits.
These vector types implement some standard arithmetic traits (i.e. they can be added together using
<code>+</code>, multiplied by a scalar using <code>*</code>, among others), which are implemented as efficiently
as possible using SIMD instructions.
These can be created in a SIMD context using the <a href="trait.SimdFrom.html" title="trait fearless_simd::SimdFrom"><code>SimdFrom</code></a> trait, or the
<a href="trait.SimdBase.html#tymethod.from_slice" title="associated function fearless_simd::SimdBase::from_slice"><code>from_slice</code></a> associated function.</p>
<p>To call a function with the best available target features and get the associated <code>Simd</code>
implementation, use the <a href="macro.dispatch.html" title="macro fearless_simd::dispatch"><code>dispatch!()</code></a> macro:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>fearless_simd::{Level, Simd, dispatch};

<span class="attr">#[inline(always)]
</span><span class="kw">fn </span>sigmoid&lt;S: Simd&gt;(simd: S, x: <span class="kw-2">&amp;</span>[f32], out: <span class="kw-2">&amp;mut </span>[f32]) { <span class="comment">/* ... */ </span>}

<span class="comment">// The stored level, which you should only construct once in your application.
</span><span class="kw">let </span>level = Level::new();

<span class="macro">dispatch!</span>(level, simd =&gt; sigmoid(simd, <span class="kw-2">&amp;</span>[<span class="comment">/*...*/</span>], <span class="kw-2">&amp;mut </span>[<span class="comment">/*...*/</span>]));</code></pre></div>
<p>A few things to note:</p>
<ol>
<li><code>sigmoid</code> is generic over any <code>Simd</code> type.</li>
<li>The <a href="macro.dispatch.html" title="macro fearless_simd::dispatch"><code>dispatch</code></a> macro is used to invoke the given function with the target features associated with the supplied <a href="enum.Level.html" title="enum fearless_simd::Level"><code>Level</code></a>.</li>
<li>The function or closure passed to <a href="macro.dispatch.html" title="macro fearless_simd::dispatch"><code>dispatch!()</code></a> should be <code>#[inline(always)]</code>.
The performance of the SIMD implementation may be poor if that isnâ€™t the case. See <a href="#inlining">the section on inlining for details</a></li>
</ol>
<p>The first parameter to <a href="macro.dispatch.html" title="macro fearless_simd::dispatch"><code>dispatch!()</code></a> is the <a href="enum.Level.html" title="enum fearless_simd::Level"><code>Level</code></a>.
If you are writing an application, you should create this once (using <a href="enum.Level.html#method.new" title="associated function fearless_simd::Level::new"><code>Level::new</code></a>), and pass it to any function which wants to use SIMD.
This type stores which instruction sets are available for the current process, which is used
in the macro to dispatch to the most optimal variant of the supplied function for this process.</p>
<h2 id="inlining"><a class="doc-anchor" href="#inlining">Â§</a>Inlining</h2>
<p>Fearless SIMD relies heavily on Rustâ€™s inlining support to create functions which have the
given target features enabled.
As such, most functions which you write when using Fearless SIMD should have the <code>#[inline(always)]</code> attribute.</p>
<!--
# Kernels vs not kernels

TODO: Talk about writing versions of functions which can be called in other `S: Simd` functions.
I think this pattern can also have a macro.
-->
<h2 id="webassembly"><a class="doc-anchor" href="#webassembly">Â§</a>Webassembly</h2>
<p>WASM SIMD doesnâ€™t have feature detection, and so you need to compile two versions of your bundle for WASM, one with SIMD and one without,
then select the appropriate one for your userâ€™s browser.
TODO: Expand on this.</p>
<h3 id="credits"><a class="doc-anchor" href="#credits">Â§</a>Credits</h3>
<p>This crate was inspired by <a href="https://crates.io/crates/pulp"><code>pulp</code></a>, <a href="https://doc.rust-lang.org/1.91.0/std/simd/index.html" title="mod std::simd"><code>std::simd</code></a>, among others in the Rust ecosystem, though makes many decisions differently.
It benefited from conversations with Luca Versari, though he is not responsible for any of the mistakes or bad decisions.</p>
<h2 id="feature-flags"><a class="doc-anchor" href="#feature-flags">Â§</a>Feature Flags</h2>
<p>The following crate <a href="https://doc.rust-lang.org/cargo/reference/features.html#dependency-features">feature flags</a> are available:</p>
<ul>
<li><code>std</code> (enabled by default): Get floating point functions from the standard library (likely using your targetâ€™s libc).
Also allows using <a href="enum.Level.html#method.new" title="associated function fearless_simd::Level::new"><code>Level::new</code></a> on all platforms, to detect which target features are enabled.</li>
<li><code>libm</code>: Use floating point implementations from [libm].</li>
<li><code>safe_wrappers</code>: Include safe wrappers for (some) target feature specific intrinsics,
beyond the basic SIMD operations abstracted on all platforms.</li>
</ul>
<p>At least one of <code>std</code> and <code>libm</code> is required; <code>std</code> overrides <code>libm</code>.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="mod" href="core_arch/index.html" title="mod fearless_simd::core_arch">core_<wbr>arch</a></dt><dd>Access to architecture-specific intrinsics.</dd><dt><a class="mod" href="generated/index.html" title="mod fearless_simd::generated">generated</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dd>A module containing generated files</dd><dt><a class="mod" href="impl_macros/index.html" title="mod fearless_simd::impl_macros">impl_<wbr>macros</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dd>Macros used by implementations</dd><dt><a class="mod" href="macros/index.html" title="mod fearless_simd::macros">macros</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dd>Macros publicly exported</dd><dt><a class="mod" href="traits/index.html" title="mod fearless_simd::traits">traits</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dt><a class="mod" href="x86/index.html" title="mod fearless_simd::x86">x86</a></dt><dd>Implementations of <a href="trait.Simd.html" title="trait fearless_simd::Simd"><code>Simd</code></a> on x86 architectures (both 32 and 64 bit).</dd></dl><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="macro" href="macro.dispatch.html" title="macro fearless_simd::dispatch">dispatch</a></dt><dd>Access the applicable <a href="trait.Simd.html" title="trait fearless_simd::Simd"><code>Simd</code></a> for a given <code>level</code>, and perform an operation using it.</dd><dt><a class="macro" href="macro.simd_dispatch.html" title="macro fearless_simd::simd_dispatch">simd_<wbr>dispatch</a><wbr><span class="stab deprecated" title="">Deprecated</span></dt><dd>Defines a new function which dispatches to a SIMD-generic function, enabling the correct
target features.</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.Avx2.html" title="struct fearless_simd::Avx2">Avx2</a></dt><dd>The SIMD token for the â€œAVX2â€ and â€œFMAâ€ level.</dd><dt><a class="struct" href="struct.Fallback.html" title="struct fearless_simd::Fallback">Fallback</a></dt><dd>The SIMD token for the â€œfallbackâ€ level.</dd><dt><a class="struct" href="struct.Sse4_2.html" title="struct fearless_simd::Sse4_2">Sse4_2</a></dt><dd>The SIMD token for the â€œSSE 4.2â€ level.</dd><dt><a class="struct" href="struct.f32x4.html" title="struct fearless_simd::f32x4">f32x4</a></dt><dt><a class="struct" href="struct.f32x8.html" title="struct fearless_simd::f32x8">f32x8</a></dt><dt><a class="struct" href="struct.f32x16.html" title="struct fearless_simd::f32x16">f32x16</a></dt><dt><a class="struct" href="struct.f64x2.html" title="struct fearless_simd::f64x2">f64x2</a></dt><dt><a class="struct" href="struct.f64x4.html" title="struct fearless_simd::f64x4">f64x4</a></dt><dt><a class="struct" href="struct.f64x8.html" title="struct fearless_simd::f64x8">f64x8</a></dt><dt><a class="struct" href="struct.i8x16.html" title="struct fearless_simd::i8x16">i8x16</a></dt><dt><a class="struct" href="struct.i8x32.html" title="struct fearless_simd::i8x32">i8x32</a></dt><dt><a class="struct" href="struct.i8x64.html" title="struct fearless_simd::i8x64">i8x64</a></dt><dt><a class="struct" href="struct.i16x8.html" title="struct fearless_simd::i16x8">i16x8</a></dt><dt><a class="struct" href="struct.i16x16.html" title="struct fearless_simd::i16x16">i16x16</a></dt><dt><a class="struct" href="struct.i16x32.html" title="struct fearless_simd::i16x32">i16x32</a></dt><dt><a class="struct" href="struct.i32x4.html" title="struct fearless_simd::i32x4">i32x4</a></dt><dt><a class="struct" href="struct.i32x8.html" title="struct fearless_simd::i32x8">i32x8</a></dt><dt><a class="struct" href="struct.i32x16.html" title="struct fearless_simd::i32x16">i32x16</a></dt><dt><a class="struct" href="struct.mask8x16.html" title="struct fearless_simd::mask8x16">mask8x16</a></dt><dt><a class="struct" href="struct.mask8x32.html" title="struct fearless_simd::mask8x32">mask8x32</a></dt><dt><a class="struct" href="struct.mask8x64.html" title="struct fearless_simd::mask8x64">mask8x64</a></dt><dt><a class="struct" href="struct.mask16x8.html" title="struct fearless_simd::mask16x8">mask16x8</a></dt><dt><a class="struct" href="struct.mask16x16.html" title="struct fearless_simd::mask16x16">mask16x16</a></dt><dt><a class="struct" href="struct.mask16x32.html" title="struct fearless_simd::mask16x32">mask16x32</a></dt><dt><a class="struct" href="struct.mask32x4.html" title="struct fearless_simd::mask32x4">mask32x4</a></dt><dt><a class="struct" href="struct.mask32x8.html" title="struct fearless_simd::mask32x8">mask32x8</a></dt><dt><a class="struct" href="struct.mask32x16.html" title="struct fearless_simd::mask32x16">mask32x16</a></dt><dt><a class="struct" href="struct.mask64x2.html" title="struct fearless_simd::mask64x2">mask64x2</a></dt><dt><a class="struct" href="struct.mask64x4.html" title="struct fearless_simd::mask64x4">mask64x4</a></dt><dt><a class="struct" href="struct.mask64x8.html" title="struct fearless_simd::mask64x8">mask64x8</a></dt><dt><a class="struct" href="struct.u8x16.html" title="struct fearless_simd::u8x16">u8x16</a></dt><dt><a class="struct" href="struct.u8x32.html" title="struct fearless_simd::u8x32">u8x32</a></dt><dt><a class="struct" href="struct.u8x64.html" title="struct fearless_simd::u8x64">u8x64</a></dt><dt><a class="struct" href="struct.u16x8.html" title="struct fearless_simd::u16x8">u16x8</a></dt><dt><a class="struct" href="struct.u16x16.html" title="struct fearless_simd::u16x16">u16x16</a></dt><dt><a class="struct" href="struct.u16x32.html" title="struct fearless_simd::u16x32">u16x32</a></dt><dt><a class="struct" href="struct.u32x4.html" title="struct fearless_simd::u32x4">u32x4</a></dt><dt><a class="struct" href="struct.u32x8.html" title="struct fearless_simd::u32x8">u32x8</a></dt><dt><a class="struct" href="struct.u32x16.html" title="struct fearless_simd::u32x16">u32x16</a></dt></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.Level.html" title="enum fearless_simd::Level">Level</a></dt><dd>The level enum with the specific SIMD capabilities available.</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.Bytes.html" title="trait fearless_simd::Bytes">Bytes</a></dt><dt><a class="trait" href="trait.Select.html" title="trait fearless_simd::Select">Select</a></dt><dt><a class="trait" href="trait.Simd.html" title="trait fearless_simd::Simd">Simd</a></dt><dd>TODO: docstring</dd><dt><a class="trait" href="trait.SimdBase.html" title="trait fearless_simd::SimdBase">Simd<wbr>Base</a></dt><dt><a class="trait" href="trait.SimdCvtFloat.html" title="trait fearless_simd::SimdCvtFloat">Simd<wbr>CvtFloat</a></dt><dd>Construction of floating point vectors from integers</dd><dt><a class="trait" href="trait.SimdCvtTruncate.html" title="trait fearless_simd::SimdCvtTruncate">Simd<wbr>CvtTruncate</a></dt><dd>Construction of integer vectors from floats by truncation</dd><dt><a class="trait" href="trait.SimdElement.html" title="trait fearless_simd::SimdElement">Simd<wbr>Element</a></dt><dt><a class="trait" href="trait.SimdFloat.html" title="trait fearless_simd::SimdFloat">Simd<wbr>Float</a></dt><dt><a class="trait" href="trait.SimdFrom.html" title="trait fearless_simd::SimdFrom">Simd<wbr>From</a></dt><dd>Value conversion, adding a SIMD blessing.</dd><dt><a class="trait" href="trait.SimdInt.html" title="trait fearless_simd::SimdInt">SimdInt</a></dt><dt><a class="trait" href="trait.SimdInto.html" title="trait fearless_simd::SimdInto">Simd<wbr>Into</a></dt><dd>Value conversion, adding a SIMD blessing.</dd><dt><a class="trait" href="trait.SimdMask.html" title="trait fearless_simd::SimdMask">Simd<wbr>Mask</a></dt><dt><a class="trait" href="trait.WithSimd.html" title="trait fearless_simd::WithSimd">With<wbr>Simd</a></dt></dl></section></div></main></body></html>