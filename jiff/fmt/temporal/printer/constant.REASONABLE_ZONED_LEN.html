<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Defines the “maximum” possible length (in bytes) of an RFC 9557 zoned datetime."><title>REASONABLE_ZONED_LEN in jiff::fmt::temporal::printer - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="jiff" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0 (f8297e351 2025-10-28)" data-channel="1.91.0" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../../../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc constant"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">REASONABLE_ZONED_LEN</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../jiff/index.html">jiff</a><span class="version">0.2.18</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"><h2><a href="index.html">In jiff::<wbr>fmt::<wbr>temporal::<wbr>printer</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../index.html">jiff</a>::<wbr><a href="../../index.html">fmt</a>::<wbr><a href="../index.html">temporal</a>::<wbr><a href="index.html">printer</a></div><h1>Constant <span class="constant">REASONABLE_<wbr>ZONED_<wbr>LEN</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/jiff/fmt/temporal/printer.rs.html#50">Source</a> </span></div><pre class="rust item-decl"><code>const REASONABLE_ZONED_LEN: <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.usize.html">usize</a> = 72;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Defines the “maximum” possible length (in bytes) of an RFC 9557 zoned
datetime.</p>
<p>In practice, the actual maximal string possible is I believe
<code>-009999-03-14T17:30:00.999999999-04:23[America/Argentina/ComodRivadavia]</code>,
which is 72 bytes. Obviously, the length of the IANA tzdb identifier
matters and can be highly variable.</p>
<p>So why is this called “reasonable” and not “maximum”? Well, it’s the
IANA tzdb identifiers. They can be arbitrarily long. There also aren’t
any rules about how long they can be. So in theory, IANA could allocate
a new identifier longer than <code>America/Argentina/ComodRivadavia</code>. With
that said, they do generally try to keep them succinct.</p>
<p>Separately from what IANA does, Jiff itself doesn’t impose any restrictions
on the length of identifiers. Callers can pass in arbitrarily long
identifiers via <code>TimeZone::tzif</code> or by simply futzing with the names of
files in <code>/usr/share/zoneinfo</code>. It’s also possible to use an arbitrarily
long identifier via the “pieces” <code>TimeZoneAnnotationName</code> API. Since we
don’t impose any restrictions, we really do want to at least try to handle
arbitrarily long identifiers here.</p>
<p>Thus, we define a “reasonable” upper bound. When the RFC 9557 string we
want to serialize is known to be under this bound, then we’ll use a “fast”
path with a fixed size buffer on the stack (or perhaps even write directly
into the spare capacity of a caller providd <code>String</code>). But when it’s above
this bound, then we fall back to a slower path that uses a buffering
mechanism to permit arbitrarily long IANA tzdb identifiers.</p>
<p>For the most part, doing this dance doesn’t come with a runtime cost,
primarily because we choose to sacrifice code size a bit by duplicating
some functions. We could have our cake and eat it too if we enforce a
maximum length on IANA tzdb identifiers. Then we could set a true
<code>MAX_ZONED_LEN</code> and avoid the case where buffering is needed.</p>
</div></details></section></div></main></body></html>