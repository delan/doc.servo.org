<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `ThreadSafeLayoutElement` trait in crate `layout_api`."><title>ThreadSafeLayoutElement in layout_api::wrapper_traits - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="layout_api" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0 (f8297e351 2025-10-28)" data-channel="1.91.0" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">ThreadSafeLayoutElement</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../layout_api/index.html">layout_<wbr>api</a><span class="version">0.0.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Thread<wbr>Safe<wbr>Layout<wbr>Element</a></h2><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.ConcreteElement" title="ConcreteElement">ConcreteElement</a></li><li><a href="#associatedtype.ConcreteThreadSafeLayoutNode" title="ConcreteThreadSafeLayoutNode">ConcreteThreadSafeLayoutNode</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.as_node" title="as_node">as_node</a></li><li><a href="#tymethod.get_attr" title="get_attr">get_attr</a></li><li><a href="#tymethod.get_attr_enum" title="get_attr_enum">get_attr_enum</a></li><li><a href="#tymethod.get_local_name" title="get_local_name">get_local_name</a></li><li><a href="#tymethod.is_body_element_of_html_element_root" title="is_body_element_of_html_element_root">is_body_element_of_html_element_root</a></li><li><a href="#tymethod.is_root" title="is_root">is_root</a></li><li><a href="#tymethod.is_shadow_host" title="is_shadow_host">is_shadow_host</a></li><li><a href="#tymethod.pseudo_element_chain" title="pseudo_element_chain">pseudo_element_chain</a></li><li><a href="#tymethod.style_data" title="style_data">style_data</a></li><li><a href="#tymethod.type_id" title="type_id">type_id</a></li><li><a href="#tymethod.unsafe_get" title="unsafe_get">unsafe_get</a></li><li><a href="#tymethod.with_pseudo" title="with_pseudo">with_pseudo</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.style" title="style">style</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In layout_<wbr>api::<wbr>wrapper_<wbr>traits</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">layout_api</a>::<wbr><a href="index.html">wrapper_traits</a></div><h1>Trait <span class="trait">Thread<wbr>Safe<wbr>Layout<wbr>Element</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/layout_api/wrapper_traits.rs.html#262-388">Source</a> </span></div><pre class="rust item-decl"><code>pub trait ThreadSafeLayoutElement&lt;'dom&gt;:
    <a class="trait" href="https://doc.rust-lang.org/1.91.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>
    + <a class="trait" href="https://doc.rust-lang.org/1.91.0/core/marker/trait.Copy.html" title="trait core::marker::Copy">Copy</a>
    + <a class="trait" href="https://doc.rust-lang.org/1.91.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>
    + <a class="trait" href="https://doc.rust-lang.org/1.91.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>
    + <a class="trait" href="../../selectors/tree/trait.Element.html" title="trait selectors::tree::Element">Element</a>&lt;Impl = <a class="struct" href="../../style/servo/selector_parser/struct.SelectorImpl.html" title="struct style::servo::selector_parser::SelectorImpl">SelectorImpl</a>&gt; {
    type <a href="#associatedtype.ConcreteThreadSafeLayoutNode" class="associatedtype">ConcreteThreadSafeLayoutNode</a>: <a class="trait" href="trait.ThreadSafeLayoutNode.html" title="trait layout_api::wrapper_traits::ThreadSafeLayoutNode">ThreadSafeLayoutNode</a>&lt;'dom, ConcreteThreadSafeLayoutElement = Self&gt;;
    type <a href="#associatedtype.ConcreteElement" class="associatedtype">ConcreteElement</a>: <a class="trait" href="../../style/dom/trait.TElement.html" title="trait style::dom::TElement">TElement</a>;

<details class="toggle type-contents-toggle"><summary class="hideme"><span>Show 13 methods</span></summary>    // Required methods
    fn <a href="#tymethod.as_node" class="fn">as_node</a>(&amp;self) -&gt; Self::<a class="associatedtype" href="trait.ThreadSafeLayoutElement.html#associatedtype.ConcreteThreadSafeLayoutNode" title="type layout_api::wrapper_traits::ThreadSafeLayoutElement::ConcreteThreadSafeLayoutNode">ConcreteThreadSafeLayoutNode</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.with_pseudo" class="fn">with_pseudo</a>(&amp;self, pseudo: <a class="enum" href="../../style/servo/selector_parser/enum.PseudoElement.html" title="enum style::servo::selector_parser::PseudoElement">PseudoElement</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.91.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.91.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="../enum.LayoutNodeType.html" title="enum layout_api::LayoutNodeType">LayoutNodeType</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.unsafe_get" class="fn">unsafe_get</a>(self) -&gt; Self::<a class="associatedtype" href="trait.ThreadSafeLayoutElement.html#associatedtype.ConcreteElement" title="type layout_api::wrapper_traits::ThreadSafeLayoutElement::ConcreteElement">ConcreteElement</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_local_name" class="fn">get_local_name</a>(&amp;self) -&gt; &amp;<a class="type" href="../../web_atoms/type.LocalName.html" title="type web_atoms::LocalName">LocalName</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_attr" class="fn">get_attr</a>(&amp;self, namespace: &amp;<a class="type" href="../../web_atoms/type.Namespace.html" title="type web_atoms::Namespace">Namespace</a>, name: &amp;<a class="type" href="../../web_atoms/type.LocalName.html" title="type web_atoms::LocalName">LocalName</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.91.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.str.html">str</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_attr_enum" class="fn">get_attr_enum</a>(
        &amp;self,
        namespace: &amp;<a class="type" href="../../web_atoms/type.Namespace.html" title="type web_atoms::Namespace">Namespace</a>,
        name: &amp;<a class="type" href="../../web_atoms/type.LocalName.html" title="type web_atoms::LocalName">LocalName</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.91.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="enum" href="../../style/servo/attr/enum.AttrValue.html" title="enum style::servo::attr::AttrValue">AttrValue</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.style_data" class="fn">style_data</a>(&amp;self) -&gt; <a class="struct" href="../../atomic_refcell/struct.AtomicRef.html" title="struct atomic_refcell::AtomicRef">AtomicRef</a>&lt;'_, <a class="struct" href="../../style/data/struct.ElementData.html" title="struct style::data::ElementData">ElementData</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.pseudo_element_chain" class="fn">pseudo_element_chain</a>(&amp;self) -&gt; <a class="struct" href="struct.PseudoElementChain.html" title="struct layout_api::wrapper_traits::PseudoElementChain">PseudoElementChain</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.is_shadow_host" class="fn">is_shadow_host</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.is_body_element_of_html_element_root" class="fn">is_body_element_of_html_element_root</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.is_root" class="fn">is_root</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.bool.html">bool</a>;

    // Provided method
    fn <a href="#method.style" class="fn">style</a>(&amp;self, context: &amp;<a class="struct" href="../../style/context/struct.SharedStyleContext.html" title="struct style::context::SharedStyleContext">SharedStyleContext</a>&lt;'_&gt;) -&gt; <a class="struct" href="../../servo_arc/struct.Arc.html" title="struct servo_arc::Arc">Arc</a>&lt;<a class="struct" href="../../style/properties/generated/struct.ComputedValues.html" title="struct style::properties::generated::ComputedValues">ComputedValues</a>&gt; { ... }
</details>}</code></pre><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><section id="associatedtype.ConcreteThreadSafeLayoutNode" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#265">Source</a><h4 class="code-header">type <a href="#associatedtype.ConcreteThreadSafeLayoutNode" class="associatedtype">ConcreteThreadSafeLayoutNode</a>: <a class="trait" href="trait.ThreadSafeLayoutNode.html" title="trait layout_api::wrapper_traits::ThreadSafeLayoutNode">ThreadSafeLayoutNode</a>&lt;'dom, ConcreteThreadSafeLayoutElement = Self&gt;</h4></section><details class="toggle" open><summary><section id="associatedtype.ConcreteElement" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#271">Source</a><h4 class="code-header">type <a href="#associatedtype.ConcreteElement" class="associatedtype">ConcreteElement</a>: <a class="trait" href="../../style/dom/trait.TElement.html" title="trait style::dom::TElement">TElement</a></h4></section></summary><div class="docblock"><p>This type alias is just a work-around to avoid writing</p>
<p>&lt;Self::ConcreteThreadSafeLayoutNode as ThreadSafeLayoutNode&gt;::ConcreteElement</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><section id="tymethod.as_node" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#273">Source</a><h4 class="code-header">fn <a href="#tymethod.as_node" class="fn">as_node</a>(&amp;self) -&gt; Self::<a class="associatedtype" href="trait.ThreadSafeLayoutElement.html#associatedtype.ConcreteThreadSafeLayoutNode" title="type layout_api::wrapper_traits::ThreadSafeLayoutElement::ConcreteThreadSafeLayoutNode">ConcreteThreadSafeLayoutNode</a></h4></section><details class="toggle method-toggle" open><summary><section id="tymethod.with_pseudo" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#286">Source</a><h4 class="code-header">fn <a href="#tymethod.with_pseudo" class="fn">with_pseudo</a>(&amp;self, pseudo: <a class="enum" href="../../style/servo/selector_parser/enum.PseudoElement.html" title="enum style::servo::selector_parser::PseudoElement">PseudoElement</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.91.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self&gt;</h4></section></summary><div class="docblock"><p>Creates a new <code>ThreadSafeLayoutElement</code> for the same <code>LayoutElement</code>
with a different pseudo-element type.</p>
<p>Returns <code>None</code> if this pseudo doesn’t apply to the given element for one of
the following reasons:</p>
<ol>
<li><code>pseudo</code> is eager and is not defined in the stylesheet. In this case, there
is not reason to process the pseudo element at all.</li>
<li><code>pseudo</code> is for <code>::servo-details-summary</code> or <code>::servo-details-content</code> and
it doesn’t apply to this element, either because it isn’t a details or is
in the wrong state.</li>
</ol>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.type_id" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#290">Source</a><h4 class="code-header">fn <a href="#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.91.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="../enum.LayoutNodeType.html" title="enum layout_api::LayoutNodeType">LayoutNodeType</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the type ID of this node.
Returns <code>None</code> if this is a pseudo-element; otherwise, returns <code>Some</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.unsafe_get" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#298">Source</a><h4 class="code-header">fn <a href="#tymethod.unsafe_get" class="fn">unsafe_get</a>(self) -&gt; Self::<a class="associatedtype" href="trait.ThreadSafeLayoutElement.html#associatedtype.ConcreteElement" title="type layout_api::wrapper_traits::ThreadSafeLayoutElement::ConcreteElement">ConcreteElement</a></h4></section></summary><div class="docblock"><p>Returns access to the underlying TElement. This is breaks the abstraction
barrier of ThreadSafeLayout wrapper layer, and can lead to races if not used
carefully.</p>
<p>We need this so that the functions defined on this trait can call
lazily_compute_pseudo_element_style, which operates on TElement.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.get_local_name" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#302">Source</a><h4 class="code-header">fn <a href="#tymethod.get_local_name" class="fn">get_local_name</a>(&amp;self) -&gt; &amp;<a class="type" href="../../web_atoms/type.LocalName.html" title="type web_atoms::LocalName">LocalName</a></h4></section></summary><div class="docblock"><p>Get the local name of this element. See
<a href="https://dom.spec.whatwg.org/#concept-element-local-name">https://dom.spec.whatwg.org/#concept-element-local-name</a>.</p>
</div></details><section id="tymethod.get_attr" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#304">Source</a><h4 class="code-header">fn <a href="#tymethod.get_attr" class="fn">get_attr</a>(&amp;self, namespace: &amp;<a class="type" href="../../web_atoms/type.Namespace.html" title="type web_atoms::Namespace">Namespace</a>, name: &amp;<a class="type" href="../../web_atoms/type.LocalName.html" title="type web_atoms::LocalName">LocalName</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.91.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.str.html">str</a>&gt;</h4></section><section id="tymethod.get_attr_enum" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#306">Source</a><h4 class="code-header">fn <a href="#tymethod.get_attr_enum" class="fn">get_attr_enum</a>(
    &amp;self,
    namespace: &amp;<a class="type" href="../../web_atoms/type.Namespace.html" title="type web_atoms::Namespace">Namespace</a>,
    name: &amp;<a class="type" href="../../web_atoms/type.LocalName.html" title="type web_atoms::LocalName">LocalName</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.91.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="enum" href="../../style/servo/attr/enum.AttrValue.html" title="enum style::servo::attr::AttrValue">AttrValue</a>&gt;</h4></section><section id="tymethod.style_data" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#308">Source</a><h4 class="code-header">fn <a href="#tymethod.style_data" class="fn">style_data</a>(&amp;self) -&gt; <a class="struct" href="../../atomic_refcell/struct.AtomicRef.html" title="struct atomic_refcell::AtomicRef">AtomicRef</a>&lt;'_, <a class="struct" href="../../style/data/struct.ElementData.html" title="struct style::data::ElementData">ElementData</a>&gt;</h4></section><section id="tymethod.pseudo_element_chain" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#310">Source</a><h4 class="code-header">fn <a href="#tymethod.pseudo_element_chain" class="fn">pseudo_element_chain</a>(&amp;self) -&gt; <a class="struct" href="struct.PseudoElementChain.html" title="struct layout_api::wrapper_traits::PseudoElementChain">PseudoElementChain</a></h4></section><section id="tymethod.is_shadow_host" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#371">Source</a><h4 class="code-header">fn <a href="#tymethod.is_shadow_host" class="fn">is_shadow_host</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.bool.html">bool</a></h4></section><details class="toggle method-toggle" open><summary><section id="tymethod.is_body_element_of_html_element_root" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#381">Source</a><h4 class="code-header">fn <a href="#tymethod.is_body_element_of_html_element_root" class="fn">is_body_element_of_html_element_root</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Returns whether this node is a body element of an html element root
in an HTML element document.</p>
<p>Note that this does require accessing the parent, which this interface
technically forbids. But accessing the parent is only unsafe insofar as
it can be used to reach siblings and cousins. A simple immutable borrow
of the parent data is fine, since the bottom-up traversal will not process
the parent until all the children have been processed.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.is_root" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#387">Source</a><h4 class="code-header">fn <a href="#tymethod.is_root" class="fn">is_root</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Returns whether this node is the root element in an HTML document element.</p>
<p>Note that, like <code>Self::is_body_element_of_html_element_root</code>, this accesses the parent.
As in that case, since this is an immutable borrow, we do not violate thread safety.</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.style" class="method"><a class="src rightside" href="../../src/layout_api/wrapper_traits.rs.html#317-369">Source</a><h4 class="code-header">fn <a href="#method.style" class="fn">style</a>(&amp;self, context: &amp;<a class="struct" href="../../style/context/struct.SharedStyleContext.html" title="struct style::context::SharedStyleContext">SharedStyleContext</a>&lt;'_&gt;) -&gt; <a class="struct" href="../../servo_arc/struct.Arc.html" title="struct servo_arc::Arc">Arc</a>&lt;<a class="struct" href="../../style/properties/generated/struct.ComputedValues.html" title="struct style::properties::generated::ComputedValues">ComputedValues</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the style results for the given node. If CSS selector matching
has not yet been performed, fails.</p>
<p>Unlike the version on TNode, this handles pseudo-elements.</p>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.91.0/reference/items/traits.html#dyn-compatibility">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../../trait.impl/layout_api/wrapper_traits/trait.ThreadSafeLayoutElement.js" async></script></section></div></main></body></html>