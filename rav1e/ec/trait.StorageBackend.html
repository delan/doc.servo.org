<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="`StorageBackend` is an internal trait used to tie a specific `Writer` implementation’s storage to the generic `Writer`.  It would be private, but Rust is deprecating ‘private trait in a public interface’ support."><title>StorageBackend in rav1e::ec - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="rav1e" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0 (f8297e351 2025-10-28)" data-channel="1.91.0" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">StorageBackend</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../rav1e/index.html">rav1e</a><span class="version">0.7.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Storage<wbr>Backend</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.checkpoint" title="checkpoint">checkpoint</a></li><li><a href="#tymethod.rollback" title="rollback">rollback</a></li><li><a href="#tymethod.store" title="store">store</a></li><li><a href="#tymethod.stream_bits" title="stream_bits">stream_bits</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In rav1e::<wbr>ec</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">rav1e</a>::<wbr><a href="index.html">ec</a></div><h1>Trait <span class="trait">Storage<wbr>Backend</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/rav1e/ec.rs.html#104-113">Source</a> </span></div><pre class="rust item-decl"><code>pub trait StorageBackend {
    // Required methods
    fn <a href="#tymethod.store" class="fn">store</a>(&amp;mut self, fl: <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.u16.html">u16</a>, fh: <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.u16.html">u16</a>, nms: <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.u16.html">u16</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.stream_bits" class="fn">stream_bits</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.usize.html">usize</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.checkpoint" class="fn">checkpoint</a>(&amp;mut self) -&gt; <a class="struct" href="struct.WriterCheckpoint.html" title="struct rav1e::ec::WriterCheckpoint">WriterCheckpoint</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.rollback" class="fn">rollback</a>(&amp;mut self, _: &amp;<a class="struct" href="struct.WriterCheckpoint.html" title="struct rav1e::ec::WriterCheckpoint">WriterCheckpoint</a>);
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p><code>StorageBackend</code> is an internal trait used to tie a specific <code>Writer</code>
implementation’s storage to the generic <code>Writer</code>.  It would be
private, but Rust is deprecating ‘private trait in a public
interface’ support.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.store" class="method"><a class="src rightside" href="../../src/rav1e/ec.rs.html#106">Source</a><h4 class="code-header">fn <a href="#tymethod.store" class="fn">store</a>(&amp;mut self, fl: <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.u16.html">u16</a>, fh: <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.u16.html">u16</a>, nms: <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.u16.html">u16</a>)</h4></section></summary><div class="docblock"><p>Store partially-computed range code into given storage backend</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.stream_bits" class="method"><a class="src rightside" href="../../src/rav1e/ec.rs.html#108">Source</a><h4 class="code-header">fn <a href="#tymethod.stream_bits" class="fn">stream_bits</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Return bit-length of encoded stream to date</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.checkpoint" class="method"><a class="src rightside" href="../../src/rav1e/ec.rs.html#110">Source</a><h4 class="code-header">fn <a href="#tymethod.checkpoint" class="fn">checkpoint</a>(&amp;mut self) -&gt; <a class="struct" href="struct.WriterCheckpoint.html" title="struct rav1e::ec::WriterCheckpoint">WriterCheckpoint</a></h4></section></summary><div class="docblock"><p>Backend implementation of checkpoint to pass through Writer interface</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.rollback" class="method"><a class="src rightside" href="../../src/rav1e/ec.rs.html#112">Source</a><h4 class="code-header">fn <a href="#tymethod.rollback" class="fn">rollback</a>(&amp;mut self, _: &amp;<a class="struct" href="struct.WriterCheckpoint.html" title="struct rav1e::ec::WriterCheckpoint">WriterCheckpoint</a>)</h4></section></summary><div class="docblock"><p>Backend implementation of rollback to pass through Writer interface</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-StorageBackend-for-WriterBase%3CWriterCounter%3E" class="impl"><a class="src rightside" href="../../src/rav1e/ec.rs.html#193-222">Source</a><a href="#impl-StorageBackend-for-WriterBase%3CWriterCounter%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.StorageBackend.html" title="trait rav1e::ec::StorageBackend">StorageBackend</a> for <a class="struct" href="struct.WriterBase.html" title="struct rav1e::ec::WriterBase">WriterBase</a>&lt;<a class="struct" href="struct.WriterCounter.html" title="struct rav1e::ec::WriterCounter">WriterCounter</a>&gt;</h3><div class="docblock"><p>The Counter stores nothing we write to it, it merely counts the
bit usage like in an Encoder for cost analysis.</p>
</div></section><section id="impl-StorageBackend-for-WriterBase%3CWriterEncoder%3E" class="impl"><a class="src rightside" href="../../src/rav1e/ec.rs.html#264-308">Source</a><a href="#impl-StorageBackend-for-WriterBase%3CWriterEncoder%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.StorageBackend.html" title="trait rav1e::ec::StorageBackend">StorageBackend</a> for <a class="struct" href="struct.WriterBase.html" title="struct rav1e::ec::WriterBase">WriterBase</a>&lt;<a class="struct" href="struct.WriterEncoder.html" title="struct rav1e::ec::WriterEncoder">WriterEncoder</a>&gt;</h3><div class="docblock"><p>An Encoder produces an actual range-coded bitstream from passed in
tokens.  It does not retain any information about the coded
tokens, only the resulting bitstream, and so it cannot be replayed
(only checkpointed and rolled back).</p>
</div></section><section id="impl-StorageBackend-for-WriterBase%3CWriterRecorder%3E" class="impl"><a class="src rightside" href="../../src/rav1e/ec.rs.html#228-258">Source</a><a href="#impl-StorageBackend-for-WriterBase%3CWriterRecorder%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.StorageBackend.html" title="trait rav1e::ec::StorageBackend">StorageBackend</a> for <a class="struct" href="struct.WriterBase.html" title="struct rav1e::ec::WriterBase">WriterBase</a>&lt;<a class="struct" href="struct.WriterRecorder.html" title="struct rav1e::ec::WriterRecorder">WriterRecorder</a>&gt;</h3><div class="docblock"><p>The Recorder does not produce a range-coded bitstream, but it
still tracks the range coding progress like in an Encoder, as it
neds to be able to report bit costs for RDO decisions.  It stores a
pair of mostly-computed range coding values per token recorded.</p>
</div></section></div><script src="../../trait.impl/rav1e/ec/trait.StorageBackend.js" async></script></section></div></main></body></html>