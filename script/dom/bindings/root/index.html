<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Smart pointers for the JS-managed DOM objects."><title>script::dom::bindings::root - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="script" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0 (f8297e351 2025-10-28)" data-channel="1.91.0" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module root</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../script/index.html">script</a><span class="version">0.0.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module root</a></h2><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In script::<wbr>dom::<wbr>bindings</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../index.html">script</a>::<wbr><a href="../../index.html">dom</a>::<wbr><a href="../index.html">bindings</a></div><h1>Module <span>root</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/script/dom/bindings/root.rs.html#5-408">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Smart pointers for the JS-managed DOM objects.</p>
<p>The DOM is made up of DOM objects whose lifetime is entirely controlled by
the whims of the SpiderMonkey garbage collector. The types in this module
are designed to ensure that any interactions with said Rust types only
occur on values that will remain alive the entire time.</p>
<p>Here is a brief overview of the important types:</p>
<ul>
<li><code>Root&lt;T&gt;</code>: a stack-based rooted value.</li>
<li><code>DomRoot&lt;T&gt;</code>: a stack-based reference to a rooted DOM object.</li>
<li><code>Dom&lt;T&gt;</code>: a reference to a DOM object that can automatically be traced by
the GC when encountered as a field of a Rust structure.</li>
</ul>
<p><code>Dom&lt;T&gt;</code> does not allow access to their inner value without explicitly
creating a stack-based root via the <code>root</code> method. This returns a <code>DomRoot&lt;T&gt;</code>,
which causes the JS-owned value to be uncollectable for the duration of the
<code>Root</code> objectâ€™s lifetime. A reference to the object can then be obtained
from the <code>Root</code> object. These references are not allowed to outlive their
originating <code>DomRoot&lt;T&gt;</code>.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.Dom.html" title="struct script::dom::bindings::root::Dom">Dom</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>A traced reference to a DOM object</dd><dt><a class="struct" href="struct.DomOnceCell.html" title="struct script::dom::bindings::root::DomOnceCell">DomOnce<wbr>Cell</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>A holder that allows to lazily initialize the value only once
<code>Dom&lt;T&gt;</code>, using OnceCell
Essentially a <code>OnceCell&lt;Dom&lt;T&gt;&gt;</code>.</dd><dt><a class="struct" href="struct.LayoutDom.html" title="struct script::dom::bindings::root::LayoutDom">Layout<wbr>Dom</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>An unrooted reference to a DOM object for use in layout. <code>Layout*Helpers</code>
traits must be implemented on this.</dd><dt><a class="struct" href="struct.MaybeUnreflectedDom.html" title="struct script::dom::bindings::root::MaybeUnreflectedDom">Maybe<wbr>Unreflected<wbr>Dom</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>A traced reference to a DOM object that may not be reflected yet.</dd><dt><a class="struct" href="struct.MutDom.html" title="struct script::dom::bindings::root::MutDom">MutDom</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>A holder that provides interior mutability for GC-managed values such as
<code>Dom&lt;T&gt;</code>.  Essentially a <code>Cell&lt;Dom&lt;T&gt;&gt;</code>, but safer.</dd><dt><a class="struct" href="struct.MutNullableDom.html" title="struct script::dom::bindings::root::MutNullableDom">MutNullable<wbr>Dom</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>A holder that provides interior mutability for GC-managed values such as
<code>Dom&lt;T&gt;</code>, with nullability represented by an enclosing Option wrapper.
Essentially a <code>Cell&lt;Option&lt;Dom&lt;T&gt;&gt;&gt;</code>, but safer.</dd><dt><a class="struct" href="struct.Root.html" title="struct script::dom::bindings::root::Root">Root</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>A rooted value.</dd><dt><a class="struct" href="struct.RootCollection.html" title="struct script::dom::bindings::root::RootCollection">Root<wbr>Collection</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>A rooting mechanism for reflectors on the stack.
LIFO is not required.</dd></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.STACK_ROOTS.html" title="constant script::dom::bindings::root::STACK_ROOTS">STACK_<wbr>ROOTS</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.AsHandleValue.html" title="trait script::dom::bindings::root::AsHandleValue">AsHandle<wbr>Value</a></dt><dd>Converts a rooted <code>Heap&lt;Value&gt;</code> into a <code>HandleValue</code>.</dd><dt><a class="trait" href="trait.DomSlice.html" title="trait script::dom::bindings::root::DomSlice">DomSlice</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Get a slice of references to DOM objects.</dd><dt><a class="trait" href="trait.StableTraceObject.html" title="trait script::dom::bindings::root::StableTraceObject">Stable<wbr>Trace<wbr>Object</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd><code>StableTraceObject</code> represents values that can be rooted through a stable address that will
not change for their whole lifetime.
It is an unsafe trait that requires implementors to ensure certain safety guarantees.</dd><dt><a class="trait" href="trait.ToLayout.html" title="trait script::dom::bindings::root::ToLayout">ToLayout</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.assert_in_layout.html" title="fn script::dom::bindings::root::assert_in_layout">assert_<wbr>in_<wbr>layout</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.assert_in_script.html" title="fn script::dom::bindings::root::assert_in_script">assert_<wbr>in_<wbr>script</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.trace_roots.html" title="fn script::dom::bindings::root::trace_roots">trace_<wbr>roots</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></dt><dd>SM Callback that traces the rooted reflectors</dd></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="type" href="type.DomRoot.html" title="type script::dom::bindings::root::DomRoot">DomRoot</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>A rooted reference to a DOM object.</dd></dl></section></div></main></body></html>