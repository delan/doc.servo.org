<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The script thread is the thread that owns the DOM in memory, runs JavaScript, and triggers layout. Itâ€™s in charge of processing events for all same-origin pages in a frame tree, and manages the entire lifetime of pages in the frame tree from initial request to teardown."><title>script::script_thread - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="script" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0 (f8297e351 2025-10-28)" data-channel="1.91.0" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module script_thread</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../script/index.html">script</a><span class="version">0.0.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module script_<wbr>thread</a></h2><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate script</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">script</a></div><h1>Module <span>script_<wbr>thread</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/script/script_thread.rs.html#5-4021">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The script thread is the thread that owns the DOM in memory, runs JavaScript, and triggers
layout. Itâ€™s in charge of processing events for all same-origin pages in a frame
tree, and manages the entire lifetime of pages in the frame tree from initial request to
teardown.</p>
<p>Page loads follow a two-step process. When a request for a new page load is received, the
network request is initiated and the relevant data pertaining to the new page is stashed.
While the non-blocking request is ongoing, the script thread is free to process further events,
noting when they pertain to ongoing loads (such as resizes/viewport adjustments). When the
initial response is received for an ongoing load, the second phase starts - the frame tree
entry is created, along with the Window and Document objects, and the appropriate parser
takes over the response body. Once parsing is complete, the document lifecycle for loading
a page runs its course and the script thread returns to processing events in the main event
loop.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.BHMExitSignal.html" title="struct script::script_thread::BHMExitSignal">BHMExit<wbr>Signal</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="struct" href="struct.IncompleteParserContexts.html" title="struct script::script_thread::IncompleteParserContexts">Incomplete<wbr>Parser<wbr>Contexts</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="struct" href="struct.ScriptMemoryFailsafe.html" title="struct script::script_thread::ScriptMemoryFailsafe">Script<wbr>Memory<wbr>Failsafe</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>In the event of thread panic, all data on the stack runs its destructor. However, there
are no reachable, owning pointers to the DOM memory, so it never gets freed by default
when the script thread fails. The ScriptMemoryFailsafe uses the destructor bomb pattern
to forcibly tear down the JS realms for pages associated with the failing ScriptThread.</dd><dt><a class="struct" href="struct.ScriptThread.html" title="struct script::script_thread::ScriptThread">Script<wbr>Thread</a></dt><dt><a class="struct" href="struct.ScriptUserInteractingGuard.html" title="struct script::script_thread::ScriptUserInteractingGuard">Script<wbr>User<wbr>Interacting<wbr>Guard</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>A simple guard structure that restore the user interacting state when dropped</dd></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.SCRIPT_THREAD_ROOT.html" title="constant script::script_thread::SCRIPT_THREAD_ROOT">SCRIPT_<wbr>THREAD_<wbr>ROOT</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.interrupt_callback.html" title="fn script::script_thread::interrupt_callback">interrupt_<wbr>callback</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></dt><dt><a class="fn" href="fn.trace_thread.html" title="fn script::script_thread::trace_thread">trace_<wbr>thread</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></dt><dd>Safety</dd><dt><a class="fn" href="fn.with_optional_script_thread.html" title="fn script::script_thread::with_optional_script_thread">with_<wbr>optional_<wbr>script_<wbr>thread</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.with_script_thread.html" title="fn script::script_thread::with_script_thread">with_<wbr>script_<wbr>thread</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="type" href="type.NodeIdSet.html" title="type script::script_thread::NodeIdSet">Node<wbr>IdSet</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt></dl></section></div></main></body></html>