<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Trait for rendering contexts that support recording and replaying operations."><title>Recordable in vello_common::recording - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="vello_common" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0 (f8297e351 2025-10-28)" data-channel="1.91.0" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Recordable</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../vello_common/index.html">vello_<wbr>common</a><span class="version">0.0.4</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Recordable</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#state-modification-during-replay" title="State Modification During Replay">State Modification During Replay</a></li><li><a href="#multithreading-limitation" title="Multithreading Limitation">Multithreading Limitation</a></li><li><a href="#usage-pattern" title="Usage Pattern">Usage Pattern</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.execute_recording" title="execute_recording">execute_recording</a></li><li><a href="#tymethod.prepare_recording" title="prepare_recording">prepare_recording</a></li><li><a href="#tymethod.record" title="record">record</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In vello_<wbr>common::<wbr>recording</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">vello_common</a>::<wbr><a href="index.html">recording</a></div><h1>Trait <span class="trait">Recordable</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/vello_common/recording.rs.html#257-318">Source</a> </span></div><pre class="rust item-decl"><code>pub trait Recordable {
    // Required methods
    fn <a href="#tymethod.record" class="fn">record</a>&lt;F&gt;(&amp;mut self, recording: &amp;mut <a class="struct" href="struct.Recording.html" title="struct vello_common::recording::Recording">Recording</a>, f: F)
       <span class="where">where F: <a class="trait" href="https://doc.rust-lang.org/1.91.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;mut <a class="struct" href="struct.Recorder.html" title="struct vello_common::recording::Recorder">Recorder</a>&lt;'_&gt;)</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.prepare_recording" class="fn">prepare_recording</a>(&amp;mut self, recording: &amp;mut <a class="struct" href="struct.Recording.html" title="struct vello_common::recording::Recording">Recording</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.execute_recording" class="fn">execute_recording</a>(&amp;mut self, recording: &amp;<a class="struct" href="struct.Recording.html" title="struct vello_common::recording::Recording">Recording</a>);
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Trait for rendering contexts that support recording and replaying operations.</p>
<h2 id="state-modification-during-replay"><a class="doc-anchor" href="#state-modification-during-replay">§</a>State Modification During Replay</h2>
<p><strong>Important:</strong> When replaying recordings using methods like <code>execute_recording()</code>,
the renderer’s state (transform, paint, fill rule, stroke settings, etc.) will be
modified to match the state changes captured in the recording. The renderer will
be left in the final state after all commands have been executed.</p>
<h2 id="multithreading-limitation"><a class="doc-anchor" href="#multithreading-limitation">§</a>Multithreading Limitation</h2>
<p><strong>Note:</strong> Recording and replay functionality is not currently implemented for
<code>vello_cpu</code> when multithreading is enabled. This limitation only affects
<code>vello_cpu</code> in multithreaded mode; single-threaded <code>vello_cpu</code> and <code>vello_hybrid</code>
work correctly with recordings.</p>
<h2 id="usage-pattern"><a class="doc-anchor" href="#usage-pattern">§</a>Usage Pattern</h2>
<p>A consumer needs to do the following to render:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>recording = Recording::new();
scene.record(<span class="kw-2">&amp;mut </span>recording, |ctx| { ... });
scene.prepare_recording(<span class="kw-2">&amp;mut </span>recording);
scene.execute_recording(<span class="kw-2">&amp;</span>recording);</code></pre></div>
<p>Or to prepare for later rendering:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>recording = Recording::new();
scene.record(<span class="kw-2">&amp;mut </span>recording, |ctx| { ... });
scene.prepare_recording(<span class="kw-2">&amp;mut </span>recording);

<span class="comment">// sometime later
</span>scene.execute_recording(<span class="kw-2">&amp;</span>recording);</code></pre></div></div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.record" class="method"><a class="src rightside" href="../../src/vello_common/recording.rs.html#272-274">Source</a><h4 class="code-header">fn <a href="#tymethod.record" class="fn">record</a>&lt;F&gt;(&amp;mut self, recording: &amp;mut <a class="struct" href="struct.Recording.html" title="struct vello_common::recording::Recording">Recording</a>, f: F)<div class="where">where
    F: <a class="trait" href="https://doc.rust-lang.org/1.91.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;mut <a class="struct" href="struct.Recorder.html" title="struct vello_common::recording::Recorder">Recorder</a>&lt;'_&gt;),</div></h4></section></summary><div class="docblock"><p>Record rendering commands into a recording.</p>
<p>This method allows you to capture a sequence of rendering operations
in a <code>Recording</code> that can be cached and replayed later.</p>
<h5 id="example"><a class="doc-anchor" href="#example">§</a>Example</h5>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>recording = Recording::new();
scene.record(<span class="kw-2">&amp;mut </span>recording, |ctx| {
    ctx.fill_rect(<span class="kw-2">&amp;</span>Rect::new(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">100.0</span>, <span class="number">100.0</span>));
    ctx.set_paint(Color::RED);
    ctx.stroke_path(<span class="kw-2">&amp;</span>some_path);
});</code></pre></div></div></details><details class="toggle method-toggle" open><summary><section id="tymethod.prepare_recording" class="method"><a class="src rightside" href="../../src/vello_common/recording.rs.html#292">Source</a><h4 class="code-header">fn <a href="#tymethod.prepare_recording" class="fn">prepare_recording</a>(&amp;mut self, recording: &amp;mut <a class="struct" href="struct.Recording.html" title="struct vello_common::recording::Recording">Recording</a>)</h4></section></summary><div class="docblock"><p>Generate sparse strips for a recording.</p>
<p>This method processes the recorded commands and generates cached sparse strips
without executing the rendering. This allows you to pre-generate strips for
better control over when the expensive computation happens.</p>
<h5 id="example-1"><a class="doc-anchor" href="#example-1">§</a>Example</h5>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>recording = Recording::new();
scene.record(<span class="kw-2">&amp;mut </span>recording, |ctx| {
    ctx.fill_rect(<span class="kw-2">&amp;</span>Rect::new(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">100.0</span>, <span class="number">100.0</span>));
});

<span class="comment">// Generate strips explicitly
</span>scene.prepare_recording(<span class="kw-2">&amp;mut </span>recording);</code></pre></div></div></details><details class="toggle method-toggle" open><summary><section id="tymethod.execute_recording" class="method"><a class="src rightside" href="../../src/vello_common/recording.rs.html#317">Source</a><h4 class="code-header">fn <a href="#tymethod.execute_recording" class="fn">execute_recording</a>(&amp;mut self, recording: &amp;<a class="struct" href="struct.Recording.html" title="struct vello_common::recording::Recording">Recording</a>)</h4></section></summary><div class="docblock"><p>Execute a recording directly without preparation.</p>
<p>This method executes the rendering commands from a recording, using any
cached sparse strips that have been previously generated. If the recording
has not been prepared (no cached strips), this will result in empty rendering.</p>
<p>Use this method when you have a recording that has already been prepared
via <code>prepare_recording()</code>, or when you want to execute commands immediately
without explicit preparation.</p>
<h5 id="example-2"><a class="doc-anchor" href="#example-2">§</a>Example</h5>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>recording = Recording::new();
scene.record(<span class="kw-2">&amp;mut </span>recording, |ctx| {
    ctx.fill_rect(<span class="kw-2">&amp;</span>Rect::new(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">100.0</span>, <span class="number">100.0</span>));
});

<span class="comment">// Prepare strips first
</span>scene.prepare_recording(<span class="kw-2">&amp;mut </span>recording);

<span class="comment">// Then execute with cached strips
</span>scene.execute_recording(<span class="kw-2">&amp;</span>recording);</code></pre></div></div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.91.0/reference/items/traits.html#dyn-compatibility">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../../trait.impl/vello_common/recording/trait.Recordable.js" async></script></section></div></main></body></html>