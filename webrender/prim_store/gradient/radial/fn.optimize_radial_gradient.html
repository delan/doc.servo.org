<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Avoid invoking the radial gradient shader on large areas where the color is constant."><title>optimize_radial_gradient in webrender::prim_store::gradient::radial - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="webrender" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0 (f8297e351 2025-10-28)" data-channel="1.91.0" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../../../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">optimize_radial_gradient</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../webrender/index.html">webrender</a><span class="version">0.68.0</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"><h2><a href="index.html">In webrender::<wbr>prim_<wbr>store::<wbr>gradient::<wbr>radial</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../index.html">webrender</a>::<wbr><a href="../../index.html">prim_store</a>::<wbr><a href="../index.html">gradient</a>::<wbr><a href="index.html">radial</a></div><h1>Function <span class="fn">optimize_<wbr>radial_<wbr>gradient</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/webrender/prim_store/gradient/radial.rs.html#425-578">Source</a> </span></div><pre class="rust item-decl"><code>pub fn optimize_radial_gradient(
    prim_rect: &amp;mut <a class="type" href="../../../../webrender_api/units/type.LayoutRect.html" title="type webrender_api::units::LayoutRect">LayoutRect</a>,
    stretch_size: &amp;mut <a class="type" href="../../../../webrender_api/units/type.LayoutSize.html" title="type webrender_api::units::LayoutSize">LayoutSize</a>,
    center: &amp;mut <a class="type" href="../../../../webrender_api/units/type.LayoutPoint.html" title="type webrender_api::units::LayoutPoint">LayoutPoint</a>,
    tile_spacing: &amp;mut <a class="type" href="../../../../webrender_api/units/type.LayoutSize.html" title="type webrender_api::units::LayoutSize">LayoutSize</a>,
    clip_rect: &amp;<a class="type" href="../../../../webrender_api/units/type.LayoutRect.html" title="type webrender_api::units::LayoutRect">LayoutRect</a>,
    radius: <a class="type" href="../../../../webrender_api/units/type.LayoutSize.html" title="type webrender_api::units::LayoutSize">LayoutSize</a>,
    end_offset: <a class="primitive" href="https://doc.rust-lang.org/1.91.0/std/primitive.f32.html">f32</a>,
    extend_mode: <a class="enum" href="../../../../webrender_api/display_item/enum.ExtendMode.html" title="enum webrender_api::display_item::ExtendMode">ExtendMode</a>,
    stops: &amp;[<a class="struct" href="../struct.GradientStopKey.html" title="struct webrender::prim_store::gradient::GradientStopKey">GradientStopKey</a>],
    solid_parts: &amp;mut dyn <a class="trait" href="https://doc.rust-lang.org/1.91.0/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(&amp;<a class="type" href="../../../../webrender_api/units/type.LayoutRect.html" title="type webrender_api::units::LayoutRect">LayoutRect</a>, <a class="struct" href="../../../../webrender_api/color/struct.ColorU.html" title="struct webrender_api::color::ColorU">ColorU</a>),
)</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Avoid invoking the radial gradient shader on large areas where the color is
constant.</p>
<p>If the extend mode is set to clamp, the “interesting” part
of the gradient is only in the bounds of the gradient’s ellipse, and the rest
is the color of the last gradient stop.</p>
<p>Sometimes we run into radial gradient with a small radius compared to the
primitive bounds, which means a large area of the primitive is a constant color
This function tries to detect that, potentially shrink the gradient primitive to only
the useful part and if needed insert solid color primitives around the gradient where
parts of it have been removed.</p>
</div></details></section></div></main></body></html>