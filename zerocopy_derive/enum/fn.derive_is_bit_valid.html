<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Generates an implementation of `is_bit_valid` for an arbitrary enum."><title>derive_is_bit_valid in zerocopy_derive::enum - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="zerocopy_derive" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0 (f8297e351 2025-10-28)" data-channel="1.91.0" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">derive_is_bit_valid</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../zerocopy_derive/index.html">zerocopy_<wbr>derive</a><span class="version">0.8.33</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"><h2><a href="index.html">In zerocopy_<wbr>derive::<wbr>enum</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">zerocopy_derive</a>::<wbr><a href="index.html">enum</a></div><h1>Function <span class="fn">derive_<wbr>is_<wbr>bit_<wbr>valid</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/zerocopy_derive/enum.rs.html#246-456">Source</a> </span></div><pre class="rust item-decl"><code>pub(crate) fn derive_is_bit_valid(
    ast: &amp;<a class="struct" href="https://docs.rs/syn/2.0.114/syn/derive/struct.DeriveInput.html" title="struct syn::derive::DeriveInput">DeriveInput</a>,
    enum_ident: &amp;<a class="struct" href="https://docs.rs/proc-macro2/1.0.105/proc_macro2/struct.Ident.html" title="struct proc_macro2::Ident">Ident</a>,
    repr: &amp;<a class="enum" href="../repr/enum.Repr.html" title="enum zerocopy_derive::repr::Repr">Repr</a>&lt;<a class="enum" href="../repr/enum.PrimitiveRepr.html" title="enum zerocopy_derive::repr::PrimitiveRepr">PrimitiveRepr</a>, <a class="enum" href="https://doc.rust-lang.org/1.91.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a>&gt;,
    generics: &amp;<a class="struct" href="https://docs.rs/syn/2.0.114/syn/generics/struct.Generics.html" title="struct syn::generics::Generics">Generics</a>,
    data: &amp;<a class="struct" href="https://docs.rs/syn/2.0.114/syn/derive/struct.DataEnum.html" title="struct syn::derive::DataEnum">DataEnum</a>,
    zerocopy_crate: &amp;<a class="struct" href="https://docs.rs/syn/2.0.114/syn/path/struct.Path.html" title="struct syn::path::Path">Path</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.91.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://docs.rs/proc-macro2/1.0.105/proc_macro2/struct.TokenStream.html" title="struct proc_macro2::TokenStream">TokenStream</a>, <a class="struct" href="https://docs.rs/syn/2.0.114/syn/error/struct.Error.html" title="struct syn::error::Error">Error</a>&gt;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Generates an implementation of <code>is_bit_valid</code> for an arbitrary enum.</p>
<p>The general process is:</p>
<ol>
<li>Generate a tag enum. This is an enum with the same repr, variants, and
corresponding discriminants as the original enum, but without any fields
on the variants. This gives us access to an enum where the variants have
the same discriminants as the one we’re writing <code>is_bit_valid</code> for.</li>
<li>Make constants from the variants of the tag enum. We need these because
we can’t put const exprs in match arms.</li>
<li>Generate variant structs. These are structs which have the same fields as
each variant of the enum, and are <code>#[repr(C)]</code> with an optional “inner
tag”.</li>
<li>Generate a variants union, with one field for each variant struct type.</li>
<li>And finally, our raw enum is a <code>#[repr(C)]</code> struct of an “outer tag” and
the variants union.</li>
</ol>
<p>See these reference links for fully-worked example decompositions.</p>
<ul>
<li><code>repr(C)</code>: <a href="https://doc.rust-lang.org/reference/type-layout.html#reprc-enums-with-fields">https://doc.rust-lang.org/reference/type-layout.html#reprc-enums-with-fields</a></li>
<li><code>repr(int)</code>: <a href="https://doc.rust-lang.org/reference/type-layout.html#primitive-representation-of-enums-with-fields">https://doc.rust-lang.org/reference/type-layout.html#primitive-representation-of-enums-with-fields</a></li>
<li><code>repr(C, int)</code>: <a href="https://doc.rust-lang.org/reference/type-layout.html#combining-primitive-representations-of-enums-with-fields-and-reprc">https://doc.rust-lang.org/reference/type-layout.html#combining-primitive-representations-of-enums-with-fields-and-reprc</a></li>
</ul>
</div></details></section></div></main></body></html>